### debugging

2018-8-28

**源代码**

```python

def boxPoint(symbol, width, height):
    if len(symbol) != 1:
        raise Exception('Symbol must be a single character string.')
    if width <= 2:
        raise Exception('Width must be a greater than 2.')
    if height <=2:
        raise Exception('Height must be a greater than 2.')
    print(symbol * width)
    for i in range (height - 2):
        print(symbol + ('' * (width -2 )) + symbol)
    print(symbol * width)

for sym, w, h in (('*', 4, 4), ('0', 20, 5), ('x', 1, 3), ('ZZ', 3, 3)):
    try:
        boxPoint(sym, w, h)
    except Exception as err:
        print('An exception happened:' + str(err))
****
**
**
****
00000000000000000000
00
00
00
00000000000000000000
An exception happened:Width must be a greater than 2.
An exception happened:Symbol must be a single character string.

    
def spam():
    bacon()
def bacon():
    raise Exception('This is the error message.')

spam()
Traceback (most recent call last):
  File "2018-08-28.py", line 24, in <module>
    spam()
  File "2018-08-28.py", line 20, in spam
    bacon()
  File "2018-08-28.py", line 22, in bacon
    raise Exception('This is the error message.')
Exception: This is the error message.


import traceback
try:
    raise Exception('This is the error message.')
ecxept:
        errorFile = open('errorInfo.txt', 'w')
        errorFile.write(traceback.format_exc())
        errorFile.close()
        print('The traceback info was written to errorInfo.txt.')
Traceback (most recent call last):
  File "2018-08-28-1.py", line 3, in <module>
    raise Exception('This is the error message.')
Exception: This is the error message.


podBayDoorStatus = 'open'
assert podBayDoorStatus == 'open','The pod bay doors need to be "open".'
podBayDoorStatus = "I\'m sorry, Dave, I\'m afraid I can't do that."
assert podBayDoorStatus =='open', 'The pod bay doors need to be "open".'
Traceback (most recent call last):
  File "2018-08-28-1.py", line 14, in <module>
    assert podBayDoorStatus =='open', 'The pod bay doors need to be "open".'
AssertionError: The pod bay doors need to be "open".
```

**今日所学**
raising exceptions

getting the traceback as a string

assertions



2018-08-29

**源代码**

```python
market_2nd = {'ns': 'green', 'ew': 'red'}
mission_16th = {'ns': 'red', 'ew': 'green'}

def switchLights(stoplight):
    for key in stoplight.keys():
        if stoplight[key] == 'green':
            stoplight[key] = 'yellow'
        elif stoplight[key] == 'yellow':
            stoplight[key] = 'red'
        elif stoplight[key] == 'red':
            stoplight[key] = 'green'
    assert 'red' in stoplight.values(), 'Neither light is red! ' 
switchLights(market_2nd)
Traceback (most recent call last):
  File "2018-08-29.py", line 13, in <module>
    switchLights(market_2nd)
  File "2018-08-29.py", line 12, in switchLights
    assert 'red' in stoplight.values(), 'Neither light is red! '
AssertionError: Neither light is red!


import logging
logging.basicConfig(level=logging.DEBUG, format=' %(asctime)s - %(levelname)s
- %(message)s')
logging.debug('Start of program')

def factorial(n):
    logging.debug('Start of factorial(%s%%)' % (n))
    total = 1
    for i in range(n + 1):
        total *= i
        logging.debug('i is ' + str(i) + ', total is ' + str(total))
    logging.debug('End of factorial(%s%%)' % (n))
    return total
    
print(factorial(5))
logging.debug('End of program')

import logging
logging.basicConfig(level=logging.DEBUG, format=' %(asctime)s - %(levelname)s- %(message)s')
logging.debug('Start of program')

def factorial(n):
    logging.debug('Start of factorial(%s%%)' % (n))
    total = 1
    for i in range(n + 1):
        total *= i
        logging.debug('i is ' + str(i) + ', total is ' + str(total))
    logging.debug('End of factorial(%s%%)' % (n))
    return total
    
print(factorial(5))
logging.debug('End of program')

2018-08-29 22:15:18,940 - DEBUG- Start of program
 2018-08-29 22:15:19,010 - DEBUG- Start of factorial(5%)
 2018-08-29 22:15:19,010 - DEBUG- i is 0, total is 0
 2018-08-29 22:15:19,010 - DEBUG- i is 1, total is 0
 2018-08-29 22:15:19,010 - DEBUG- i is 2, total is 0
 2018-08-29 22:15:19,010 - DEBUG- i is 3, total is 0
 2018-08-29 22:15:19,010 - DEBUG- i is 4, total is 0
 2018-08-29 22:15:19,010 - DEBUG- i is 5, total is 0
 2018-08-29 22:15:19,010 - DEBUG- End of factorial(5%)
 2018-08-29 22:15:19,010 - DEBUG- End of program
0
import logging
logging.basicConfig(level=logging.DEBUG, format=' %(asctime)s - %(levelname)s- %(message)s')
logging.debug('Start of program')

def factorial(n):
    logging.debug('Start of factorial(%s%%)' % (n))
    total = 1
    for i in range(1, n + 1):
        total *= i
        logging.debug('i is ' + str(i) + ', total is ' + str(total))
    logging.debug('End of factorial(%s%%)' % (n))
    return total
    
print(factorial(5))
logging.debug('End of program')

 2018-08-29 22:17:09,686 - DEBUG- Start of program
 2018-08-29 22:17:09,686 - DEBUG- Start of factorial(5%)
 2018-08-29 22:17:09,686 - DEBUG- i is 1, total is 1
 2018-08-29 22:17:09,686 - DEBUG- i is 2, total is 2
 2018-08-29 22:17:09,686 - DEBUG- i is 3, total is 6
 2018-08-29 22:17:09,686 - DEBUG- i is 4, total is 24
 2018-08-29 22:17:09,686 - DEBUG- i is 5, total is 120
 2018-08-29 22:17:09,686 - DEBUG- End of factorial(5%)
 2018-08-29 22:17:09,686 - DEBUG- End of program
120
```

**今日所学**

assertion in trafficlights simulation

logging

using the logging module



