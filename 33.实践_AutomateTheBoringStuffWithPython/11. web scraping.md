

##11. web scraping

**源代码**

```python
import webbrowser
webbrowser.open('http://inventwithpython.com')
mapit 870 Valencia St, San Francisco, CA 94110

#!python 3
# mapIt.py - launches a map in the browser using an address from the 
# command line or clipboard.

import webbrowser, sys
if len(sys.argv) > 1:
    #Get address from command line.
    address = ' '.join(sys.argv[1:])
else:
    #Get address from clipboard.
    address = pyperclip.paste()

webbrowser.open('http://www.google.com/maps/place' + address)
```

**今日所学**

project：maplt.py with the webbrowser module

step1:figure out the URL

step2:handle the command line arguments

step3:handle the clipboard content and launch the browser



2018-09-02

**源代码**

```python
In [1]: import requests

In [2]: res = requests.get('http://www.gutenberg.org/cache/epub/1112/pg1112.txt
   ...: ')

In [3]:

In [3]: type(res)
Out[3]: requests.models.Response

In [4]: res.status_code == requests.codes.ok
Out[4]: True

In [5]: len(res.text)
Out[5]: 178981

In [6]: print(res.text[:250])
The Project Gutenberg EBook of Romeo and Juliet, by William Shakespeare

This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Proje

In [7]: res = requests.get('http://inventwithpython.com/page_that_does_not_exis
   ...: t')

In [8]: res.raise_for_status()
---------------------------------------------------------------------------
HTTPError                                 Traceback (most recent call last)
<ipython-input-8-6ec835a6a98f> in <module>()
----> 1 res.raise_for_status()

D:\Anaconda\lib\site-packages\requests\models.py in raise_for_status(self)
    860
    861         if http_error_msg:
--> 862             raise HTTPError(http_error_msg, response=self)
    863
    864     def close(self):

HTTPError: 404 Client Error: Not Found for url: http://inventwithpython.com/page
_that_does_not_exist

In [9]: quit()

import requests
res = requests.get('http://inventwithpython.com/page_that_does_not_exist')
try:
    res.raise_for_status()
except Exception as exc:
    print('There was a problem: %s' %(exc))
    
```

**今日所学**

downloading files from the web with the requests ,module

downloading a web page with the requests.get() function

checking for errors

