### 7.pattern matching with regular expression

2018-08-20

**源代码**

```python
def isPhoneNumber(text):
    if len(text) != 12:
        return False
    for i in range(0, 3):
        if not text[i].isdecimal():
            return False
    if text[3] != '-':
            return False
    for i in range(4, 7):
        if not text[i].isdecimal():
            return False
    if text[7] != '-':
            return False
    for i in range(8, 12):
        if not text[i].isdecimal():
            return False
    return True
print('415-555-4242 is a phone number:')
print(isPhoneNumber('415-555-4242'))
print('Moshi moshi is a phone number:')
print(isPhoneNumber('Moshi moshi'))


def isPhoneNumber(text):
    if len(text) != 12:
        return False
    for i in range(0, 3):
        if not text[i].isdecimal():
            return False
    if text[3] != '-':
            return False
    for i in range(4, 7):
        if not text[i].isdecimal():
            return False
    if text[7] != '-':
            return False
    for i in range(8, 12):
        if not text[i].isdecimal():
            return False
    return True
message = 'Call me at 415-555-1011 tomorrow. 415-555-9999 is my office.'
for i in range(len(message)):
    chunk = message[i:i+12]
    if isPhoneNumber(chunk):
        print('Phone number found: ' + chunk)
print('Done')

Phone number found: 415-555-1011
Phone number found: 415-555-9999
Done

import re
phoneNumRegex = re.compile(r'\d\d\d-\d\d\d-\d\d\d\d')
mo = phoneNumRegex.search('My number is 415-555-4242.')
print('Phone number found: ' + mo.group())
Phone number found: 415-555-4242

```

**今日所学**

finding patterns of text without regular expressions

finding patterns of text with regular expressions

creating regex objects

passing raw strings to re.compile()

matching regex objects

review of regular expression matching



2018-08-21

**源代码**

```python
In [2]: import re

In [3]: phoneNumRegex = re.compile(r'(\d\d\d)-(\d\d\d-\d\d\d\d)')

In [4]: mo = phoneNumRegex.search('My number is 415-555-4242.')

In [5]: mo.group(1)
Out[5]: '415'

In [6]: mo.group(2)
Out[6]: '555-4242'

In [7]: mo.group()
Out[7]: '415-555-4242'

In [8]: mo.groups()
Out[8]: ('415', '555-4242')

In [9]: areaCode, mainNumber = mo.groups()

In [10]: print(areaCode)
415

In [11]: print(mainNumber)
555-4242

In [12]: phoneNumRegex = re.compile(r'(\(\d\d\d\)) (\d\d\d-\d\d\d\d)')

In [13]: phoneNumRegex = re.compile(r'(\(\d\d\d\)) (\d\d\d-\d\d\d\d)')

In [14]: mo = phoneNumRegex.search('My phone number is (415) 555-4242.')

In [15]: mo.group(1)
Out[15]: '(415)'

In [16]: mo.group(2)
Out[16]: '555-4242'

In [17]: heroRegex = re.compile (r'Batman|Tina Fey')

In [18]: mo1 = heroRegex.search('Batman and Tina Fey.')

In [19]: mo1.group()
Out[19]: 'Batman'

In [20]: mo2 = heroRegex.search('Tina Fey and Batman.')

In [21]: mo2.group()
Out[21]: 'Tina Fey'

In [22]: batRegex = re.compile(r'Bat(man|mobile|copter|bat)')

In [23]: mo = batRegex.search('Batmobile lost a wheel')

In [24]:  mo.group()
Out[24]: 'Batmobile'

In [25]: mo.group(1)
Out[25]: 'mobile'

In [26]: batRegex = re.compile(r'Bat(wo)?man')

In [27]: mo1 = batRegex.search('The Adventures of Batman')

In [28]: mo1.group()
Out[28]: 'Batman'

In [29]: mo2 = batRegex.search('The Adventures of Batwoman')

In [30]: mo2.group()
Out[30]: 'Batwoman'

In [31]: phoneRegex = re.compile(r'(\d\d\d-)?\d\d\d-\d\d\d\d')

In [32]: mo1 = phoneRegex.search('My number is 415-555-4242')

In [33]: mo1.group()
Out[33]: '415-555-4242'

In [34]: mo2 = phoneRegex.search('My number is 555-4242')

In [35]:  mo2.group()
Out[35]: '555-4242'

In [36]: batRegex = re.compile(r'Bat(wo)*man')

In [37]: mo1 = batRegex.search('The Adventures of Batman')

In [38]: mo1.group()
Out[38]: 'Batman'

In [39]: mo2 = batRegex.search('The Adventures of Batwoman')

In [40]: mo2.group()
Out[40]: 'Batwoman'

In [41]: mo3 = batRegex.search('The Adventures of Batwowowowoman')

In [42]: mo3.group()
Out[42]: 'Batwowowowoman'

In [43]: batRegex = re.compile(r'Bat(wo)+man')

In [44]: mo1 = batRegex.search('The Adventures of Batwoman')

In [45]: mo1.group()
Out[45]: 'Batwoman'

In [46]: mo2 = batRegex.search('The Adventures of Batwowowowoman')

In [47]: mo2.group()
Out[47]: 'Batwowowowoman'

In [48]: mo3 = batRegex.search('The Adventures of Batman')

In [49]: mo3 == None
Out[49]: True

```

**今日所学**

more pattern matching with regular expressions

grouping with parentheses

matching multiple groups with the pipe

optional matching with the question mark

matching zero or more with the star

matching one or more with the plus

